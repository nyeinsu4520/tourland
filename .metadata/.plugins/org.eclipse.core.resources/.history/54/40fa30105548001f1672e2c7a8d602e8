package com.example.demo;


	import org.springframework.beans.factory.annotation.Autowired;
	import org.springframework.stereotype.Controller;
	import org.springframework.ui.Model;
	import org.springframework.web.bind.annotation.GetMapping;
	import org.springframework.web.bind.annotation.PostMapping;
	import org.springframework.web.bind.annotation.RequestParam;
	import org.springframework.web.servlet.mvc.support.RedirectAttributes;


	@Controller
	public class SubscriptionController {

		 @Autowired
		private SubscriptionRepository subscriptionRepository;
		
	    @Autowired
	    private SubscriptionService subscriptionService;

	    @GetMapping("/subscribe")
	    public String showSubscriptionForm(Model model) {
	        return "Fragment/footer";
	    }
	    
	    @PostMapping("/subscribe")
	    public String subscribe(@RequestParam("email") String email, Model model) {
	        // Validate email (you might want to add more validation)
	        if (email == null || email.isEmpty()) {
	            model.addAttribute("error", "Email address cannot be empty");
	            return "Fragment/footer"; // Replace with your actual view name
	        }

	        // Save subscription to the database
	        Subscription subscription = new Subscription(email);
	        subscriptionRepository.save(subscription);

	        model.addAttribute("message", "Subscription successful! Thank you for subscribing.");
	        return "Fragment/footer"; // Replace with your actual view name
	    }
	}