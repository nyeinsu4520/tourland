<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Add Hotel Details</title>
   
       <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css">
    <script src="/bootstrap/js/bootstrap.bundle.js" type="text/javascript"></script>
    <script src="/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

  <div th:replace="@{Fragment/header}"></div>

<div class="container-fluid flex-grow-1 d-flex">
    <div class="row flex-grow-1 w-100">
         <div th:replace="@{Fragment/dashboard}"></div>

        <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
            <div class="container mt-4">
                <h3>Add Hotel Details</h3>
                <form th:object="${card}" th:action="@{/cards/save}" method="post" enctype="multipart/form-data" class="needs-validation" novalidate>
                    <!-- Card Details -->
                    <div class="mb-3">
                        <label for="cardName" class="form-label">Hotel Name</label>
                        <input type="text" class="form-control" th:field="*{title}" id="cardName" required>
                        <div class="invalid-feedback">Please enter a hotel name!</div>
                    </div>
                    <div class="mb-3">
                        <label for="description" class="form-label">Description</label>
                        <input type="text" class="form-control" th:field="*{description}" id="description" required>
                        <div class="invalid-feedback">Please enter a description!</div>
                    </div>
                     <div class="mb-3">
				            <label for="address" class="form-label">Address</label>
				            <input type="text" class="form-control" th:field="*{address}" id="address" required>
				            <div class="invalid-feedback">Please enter a address!</div>
				        </div>
				        <div class="mb-3">
            <label for="phnum" class="form-label">Phone Number</label>
            <input type="text" class="form-control" th:field="*{phnum}" id="phnum" required>
            <div class="invalid-feedback">Please enter a Phone!</div>
        </div>
                    <div class="mb-3">
                        <label for="cardImage" class="form-label">Hotel Image</label>
                        <input type="file" class="form-control" id="cardImage" name="cardImage" accept="image/*" required>
                        <div class="invalid-feedback">Please upload an image!</div>
                    </div>

                    <div id="roomTypesContainer">
                        <!-- Existing room types -->
                        <div class="room-type mb-3" th:each="roomType, stat : ${card.roomTypes}">
                            <div class="mb-3">
                                <label for="roomType" class="form-label">Room Type</label>
                                <select class="form-select" th:field="*{roomTypes[__${stat.index}__].type}" required>
                                    <option selected disabled value="">Choose...</option>
                                    <option value="Single">Single</option>
                                    <option value="Double">Double</option>
                                    <option value="Two_Single_Bed">Two Single Bed</option>
                                </select>
                                <div class="invalid-feedback">Please select a room type!</div>
                            </div>
                            <div class="mb-3">
                                <label for="roomPrice" class="form-label">Room Price</label>
                                <input type="text" class="form-control" th:field="*{roomTypes[__${stat.index}__].price}" required>
                                <div class="invalid-feedback">Please enter the room price!</div>
                            </div>
                            <div class="mb-3">
			                    <label for="roomImage" class="form-label">Room Image</label>
			                    <input type="file" class="form-control" id="roomImage" name="roomImages" accept="image/*" required>
			                    <div class="invalid-feedback">Please upload an image for this room type!</div>
			                </div>
                        </div>
                    </div>
                     <div class="mb-3">
					    <label for="location" class="form-label">Location</label>
					    <select id="location" class="form-select" th:field="*{location}" aria-label="Location" required>
					        <option value="">Select a location</option>
					        <option value="Chin">Chin</option>
					        <option value="Kachin">Kachin</option>
					        <option value="Kayin">Kayin (Karen)</option>
					        <option value="Kayah">Kayah</option>
					        <option value="Mon">Mon</option>
					        <option value="Rakhine">Rakhine (Arakan)</option>
					        <option value="Shan">Shan</option>
					        <option value="Yangon">Yangon</option>
					        <option value="Ayeyarwady">Ayeyarwady (Irrawaddy)</option>
					        <option value="Magway">Magway (Magwe)</option>
					        <option value="Mandalay">Mandalay</option>
					        <option value="Bago">Bago (Pegu)</option>
					        <option value="Sagaing">Sagaing</option>
					        <option value="Taninthary">Taninthary (Tenasserim)</option>
					        <!-- Add more options as needed -->
					    </select>
					    <div class="invalid-feedback">Please select a valid location.</div>
					</div>
                    

                    <button type="button" class="btn btn-secondary mb-3" id="addRoomTypeBtn">Add Another Room Type</button>
                    <button type="submit" class="btn btn-primary mb-3">Save Hotel Details</button>
                </form>
            </div>
        </main>
    </div>
</div>

<div th:replace="@{Fragment/footer}"></div>

<script type="text/javascript">
    'use strict';
    var form = document.querySelector('.needs-validation');
    form.addEventListener('submit', function(event) {
        if (!form.checkValidity()) {
            event.preventDefault();
            event.stopPropagation();
        }
        form.classList.add('was-validated');
    });

    var roomTypeIndex = document.querySelectorAll('.room-type').length;

    document.getElementById('addRoomTypeBtn').addEventListener('click', function() {
        let roomTypesContainer = document.getElementById('roomTypesContainer');
        let newRoomType = document.createElement('div');
        newRoomType.classList.add('room-type', 'mb-3');
        newRoomType.innerHTML = `
            <div class="mb-3">
                <label for="roomType${roomTypeIndex}" class="form-label">Room Type</label>
                <select class="form-select" id="roomType${roomTypeIndex}" name="roomTypes[${roomTypeIndex}].type" required>
                    <option selected disabled value="">Choose...</option>
                    <option value="Single">Single</option>
                    <option value="Double">Double</option>
                    <option value="Two_Single_Bed">Two_Single_Bed</option>
                </select>
                <div class="invalid-feedback">Please select a room type!</div>
            </div>
            <div class="mb-3">
                <label for="roomPrice${roomTypeIndex}" class="form-label">Room Price</label>
                <input type="text" class="form-control" id="roomPrice${roomTypeIndex}" name="roomTypes[${roomTypeIndex}].price" required>
                <div class="invalid-feedback">Please enter the room price!</div>
            </div>
            <div class="mb-3">
                <label for="roomImage${roomTypeIndex}" class="form-label">Room Image</label>
                <input type="file" class="form-control" id="roomImage${roomTypeIndex}" name="roomImages" accept="image/*" required>
                <div class="invalid-feedback">Please upload an image for this room type!</div>
            </div>
        `;
        roomTypesContainer.appendChild(newRoomType);
        roomTypeIndex++;
    });
</script>

</body>
</html>
